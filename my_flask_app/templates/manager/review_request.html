{% extends "layout/base.html" %}
{% block title %}Review Leave Request{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h4 class="mb-0"><i class="fas fa-clipboard-check me-2"></i>Review Leave Request</h4>
    </div>
    <div class="card-body">
        <h5 class="card-title">Request Details</h5>
        <div class="row mb-4">
            <div class="col-md-6">
                <p><strong>Employee:</strong> {{ leave_request.employee.full_name }}</p>
                <p><strong>Leave Type:</strong> {{ leave_request.leave_type.value.replace('_', ' ')|title }}</p>
                <p><strong>Reason:</strong> {{ leave_request.reason or 'N/A' }}</p>
            </div>
            <div class="col-md-6">
                <p><strong>Start Date:</strong> {{ leave_request.start_date.strftime('%d %b %Y') }}</p>
                <p><strong>End Date:</strong> {{ leave_request.end_date.strftime('%d %b %Y') }}</p>
                <p><strong>Duration:</strong> {{ leave_request.duration }} day(s)</p>
            </div>
        </div>

        <hr>

        <h5 class="card-title mt-4">Manager's Action</h5>
        <form method="POST">
            {{ form.hidden_tag() }}

            <div class="mb-3">
                {{ form.comments.label(class="form-label") }}
                {{ form.comments(class="form-control" + (" is-invalid" if form.comments.errors else ""), rows=4, placeholder="Provide comments for your decision (optional)") }}
                {% for error in form.comments.errors %}
                    <div class="invalid-feedback">{{ error }}</div>
                {% endfor %}
            </div>

            <div class="d-flex justify-content-end">
                <a href="{{ url_for('manager.leave_requests') }}" class="btn btn-secondary me-2">Cancel</a>
                <button type="submit" name="action" value="reject" class="btn btn-danger me-2">
                    <i class="fas fa-times me-1"></i> Reject
                </button>
                <button type="submit" name="action" value="approve" class="btn btn-success">
                    <i class="fas fa-check me-1"></i> Approve
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
