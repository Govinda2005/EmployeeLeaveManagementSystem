{% extends "layout/base.html" %} {% block title %}Employee Dashboard - ELMS{%
endblock %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>
    <i class="fas fa-tachometer-alt me-2"></i>
    Employee Dashboard
  </h1>
  <div>
    <a href="{{ url_for('employee.apply_leave') }}" class="btn btn-primary">
      <i class="fas fa-plus me-2"></i>
      Apply Leave
    </a>
  </div>
</div>

<!-- Statistics Cards -->
<div class="row mb-4">
  <div class="col-md-3 mb-3">
    <div class="card bg-primary text-white">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h4 class="mb-0">{{ total_requests }}</h4>
            <p class="mb-0">Total Requests</p>
          </div>
          <div class="align-self-center">
            <i class="fas fa-list fa-2x opacity-75"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-3 mb-3">
    <div class="card bg-warning text-white">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h4 class="mb-0">{{ pending_requests }}</h4>
            <p class="mb-0">Pending</p>
          </div>
          <div class="align-self-center">
            <i class="fas fa-clock fa-2x opacity-75"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-3 mb-3">
    <div class="card bg-success text-white">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h4 class="mb-0">{{ approved_requests }}</h4>
            <p class="mb-0">Approved</p>
          </div>
          <div class="align-self-center">
            <i class="fas fa-check fa-2x opacity-75"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-3 mb-3">
    <div class="card bg-danger text-white">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <h4 class="mb-0">{{ rejected_requests }}</h4>
            <p class="mb-0">Rejected</p>
          </div>
          <div class="align-self-center">
            <i class="fas fa-times fa-2x opacity-75"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Recent Leave Requests -->
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">
      <i class="fas fa-history me-2"></i>
      Recent Leave Requests
    </h5>
    <a
      href="{{ url_for('employee.my_leaves') }}"
      class="btn btn-outline-primary btn-sm"
    >
      View All
    </a>
  </div>
  <div class="card-body">
    {% if recent_requests %}
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Leave Type</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Duration</th>
            <th>Status</th>
            <th>Applied On</th>
          </tr>
        </thead>
        <tbody>
          {% for request in recent_requests %}
          <tr>
            <td>
              <span class="badge bg-info">
                {{ request.leave_type.value.title() }}
              </span>
            </td>
            <td>{{ request.start_date.strftime('%Y-%m-%d') }}</td>
            <td>{{ request.end_date.strftime('%Y-%m-%d') }}</td>
            <td>{{ request.duration }} days</td>
            <td>
              {% if request.status.value == 'pending' %}
              <span class="badge bg-warning">Pending</span>
              {% elif request.status.value == 'approved' %}
              <span class="badge bg-success">Approved</span>
              {% elif request.status.value == 'rejected' %}
              <span class="badge bg-danger">Rejected</span>
              {% else %}
              <span class="badge bg-secondary"
                >{{ request.status.value.title() }}</span
              >
              {% endif %}
            </td>
            <td>{{ request.created_at.strftime('%Y-%m-%d') }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="text-center text-muted py-4">
      <i class="fas fa-calendar fa-3x mb-3"></i>
      <p class="mb-0">
        No leave requests yet.
        <a href="{{ url_for('employee.apply_leave') }}"
          >Apply for your first leave</a
        >.
      </p>
    </div>
    {% endif %}
  </div>
</div>

<!-- Quick Actions -->
<div class="row mt-4">
  <div class="col-md-6">
    <div class="card">
      <div class="card-body text-center">
        <i class="fas fa-plus-circle fa-3x text-primary mb-3"></i>
        <h5>Apply for Leave</h5>
        <p class="text-muted mb-3">Submit a new leave request</p>
        <a href="{{ url_for('employee.apply_leave') }}" class="btn btn-primary">
          Apply Now
        </a>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-body text-center">
        <i class="fas fa-list fa-3x text-info mb-3"></i>
        <h5>My Leave History</h5>
        <p class="text-muted mb-3">View all your leave requests</p>
        <a href="{{ url_for('employee.my_leaves') }}" class="btn btn-info">
          View History
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
